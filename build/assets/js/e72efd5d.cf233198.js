"use strict";(self.webpackChunkroot=self.webpackChunkroot||[]).push([[6537],{2619:(e,s,n)=>{n.d(s,{R:()=>c,x:()=>d});var r=n(758);const t={},i=r.createContext(t);function c(e){const s=r.useContext(i);return r.useMemo(function(){return"function"==typeof e?e(s):{...s,...e}},[s,e])}function d(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:c(e.components),r.createElement(i.Provider,{value:s},e.children)}},8207:(e,s,n)=>{n.r(s),n.d(s,{assets:()=>h,contentTitle:()=>d,default:()=>o,frontMatter:()=>c,metadata:()=>r,toc:()=>a});const r=JSON.parse('{"id":"api/Auth/Classes/AuthService","title":"AuthService","description":"Brebaje Backend API v0.0.1","source":"@site/docs/api/Auth/Classes/AuthService.md","sourceDirName":"api/Auth/Classes","slug":"/api/Auth/Classes/AuthService","permalink":"/api/Auth/Classes/AuthService","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{},"sidebar":"docsSidebar","previous":{"title":"AuthModule","permalink":"/api/Auth/Classes/AuthModule"},"next":{"title":"DeviceFlowTokenDto","permalink":"/api/Auth/Classes/DeviceFlowTokenDto"}}');var t=n(6070),i=n(2619);const c={},d="Class: AuthService",h={},a=[{value:"Constructors",id:"constructors",level:2},{value:"Constructor",id:"constructor",level:3},{value:"Parameters",id:"parameters",level:4},{value:"jwtService",id:"jwtservice",level:5},{value:"usersService",id:"usersservice",level:5},{value:"Returns",id:"returns",level:4},{value:"Methods",id:"methods",level:2},{value:"authenticateWithGithubCode()",id:"authenticatewithgithubcode",level:3},{value:"Parameters",id:"parameters-1",level:4},{value:"code",id:"code",level:5},{value:"state?",id:"state",level:5},{value:"Returns",id:"returns-1",level:4},{value:"authWithGithub()",id:"authwithgithub",level:3},{value:"Parameters",id:"parameters-2",level:4},{value:"deviceFlowTokenDto",id:"deviceflowtokendto",level:5},{value:"Returns",id:"returns-2",level:4},{value:"generateCardanoNonce()",id:"generatecardanononce",level:3},{value:"Parameters",id:"parameters-3",level:4},{value:"userAddress",id:"useraddress",level:5},{value:"Returns",id:"returns-3",level:4},{value:"nonce",id:"nonce",level:5},{value:"generateEthNonce()",id:"generateethnonce",level:3},{value:"Parameters",id:"parameters-4",level:4},{value:"address",id:"address",level:5},{value:"Returns",id:"returns-4",level:4},{value:"nonce",id:"nonce-1",level:5},{value:"getGithubAuthUrl()",id:"getgithubauthurl",level:3},{value:"Returns",id:"returns-5",level:4},{value:"authUrl",id:"authurl",level:5},{value:"state",id:"state-1",level:5},{value:"getGithubClientId()",id:"getgithubclientid",level:3},{value:"Returns",id:"returns-6",level:4},{value:"client_id",id:"client_id",level:5},{value:"testAuthWithUserId()",id:"testauthwithuserid",level:3},{value:"Parameters",id:"parameters-5",level:4},{value:"userId",id:"userid",level:5},{value:"Returns",id:"returns-7",level:4},{value:"verifyCardanoNonce()",id:"verifycardanononce",level:3},{value:"Parameters",id:"parameters-6",level:4},{value:"userAddress",id:"useraddress-1",level:5},{value:"signature",id:"signature",level:5},{value:"Returns",id:"returns-8",level:4},{value:"verifyEthSignature()",id:"verifyethsignature",level:3},{value:"Parameters",id:"parameters-7",level:4},{value:"message",id:"message",level:5},{value:"signature",id:"signature-1",level:5},{value:"Returns",id:"returns-9",level:4}];function l(e){const s={a:"a",blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",header:"header",p:"p",strong:"strong",...(0,i.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(s.p,{children:(0,t.jsx)(s.strong,{children:"Brebaje Backend API v0.0.1"})}),"\n",(0,t.jsx)(s.p,{children:"Brebaje Backend API / auth/auth.service / AuthService"}),"\n",(0,t.jsx)(s.header,{children:(0,t.jsx)(s.h1,{id:"class-authservice",children:"Class: AuthService"})}),"\n",(0,t.jsxs)(s.p,{children:["Defined in: ",(0,t.jsx)(s.a,{href:"https://github.com/p0tion-tools/brebaje/blob/adec25cb37dc5c3412576402afa3a4ca679730fd/apps/backend/src/auth/auth.service.ts#L17",children:"apps/backend/src/auth/auth.service.ts:17"})]}),"\n",(0,t.jsx)(s.h2,{id:"constructors",children:"Constructors"}),"\n",(0,t.jsx)(s.h3,{id:"constructor",children:"Constructor"}),"\n",(0,t.jsxs)(s.blockquote,{children:["\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.strong,{children:"new AuthService"}),"(",(0,t.jsx)(s.code,{children:"jwtService"}),", ",(0,t.jsx)(s.code,{children:"usersService"}),"): ",(0,t.jsx)(s.code,{children:"AuthService"})]}),"\n"]}),"\n",(0,t.jsxs)(s.p,{children:["Defined in: ",(0,t.jsx)(s.a,{href:"https://github.com/p0tion-tools/brebaje/blob/adec25cb37dc5c3412576402afa3a4ca679730fd/apps/backend/src/auth/auth.service.ts#L23",children:"apps/backend/src/auth/auth.service.ts:23"})]}),"\n",(0,t.jsx)(s.h4,{id:"parameters",children:"Parameters"}),"\n",(0,t.jsx)(s.h5,{id:"jwtservice",children:"jwtService"}),"\n",(0,t.jsx)(s.p,{children:(0,t.jsx)(s.code,{children:"JwtService"})}),"\n",(0,t.jsx)(s.h5,{id:"usersservice",children:"usersService"}),"\n",(0,t.jsx)(s.p,{children:(0,t.jsx)(s.a,{href:"/api/Users/Classes/UsersService",children:(0,t.jsx)(s.code,{children:"UsersService"})})}),"\n",(0,t.jsx)(s.h4,{id:"returns",children:"Returns"}),"\n",(0,t.jsx)(s.p,{children:(0,t.jsx)(s.code,{children:"AuthService"})}),"\n",(0,t.jsx)(s.h2,{id:"methods",children:"Methods"}),"\n",(0,t.jsx)(s.h3,{id:"authenticatewithgithubcode",children:"authenticateWithGithubCode()"}),"\n",(0,t.jsxs)(s.blockquote,{children:["\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.strong,{children:"authenticateWithGithubCode"}),"(",(0,t.jsx)(s.code,{children:"code"}),", ",(0,t.jsx)(s.code,{children:"state?"}),"): ",(0,t.jsx)(s.code,{children:"Promise"}),"<",(0,t.jsx)(s.a,{href:"/api/Auth/Interfaces/AuthResponseDto",children:(0,t.jsx)(s.code,{children:"AuthResponseDto"})}),">"]}),"\n"]}),"\n",(0,t.jsxs)(s.p,{children:["Defined in: ",(0,t.jsx)(s.a,{href:"https://github.com/p0tion-tools/brebaje/blob/adec25cb37dc5c3412576402afa3a4ca679730fd/apps/backend/src/auth/auth.service.ts#L218",children:"apps/backend/src/auth/auth.service.ts:218"})]}),"\n",(0,t.jsx)(s.p,{children:"GitHub OAuth 2.0 Authorization Code Flow\nStep 2: Exchange authorization code for access token and authenticate user"}),"\n",(0,t.jsx)(s.h4,{id:"parameters-1",children:"Parameters"}),"\n",(0,t.jsx)(s.h5,{id:"code",children:"code"}),"\n",(0,t.jsx)(s.p,{children:(0,t.jsx)(s.code,{children:"string"})}),"\n",(0,t.jsx)(s.h5,{id:"state",children:"state?"}),"\n",(0,t.jsx)(s.p,{children:(0,t.jsx)(s.code,{children:"string"})}),"\n",(0,t.jsx)(s.h4,{id:"returns-1",children:"Returns"}),"\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.code,{children:"Promise"}),"<",(0,t.jsx)(s.a,{href:"/api/Auth/Interfaces/AuthResponseDto",children:(0,t.jsx)(s.code,{children:"AuthResponseDto"})}),">"]}),"\n",(0,t.jsx)(s.h3,{id:"authwithgithub",children:"authWithGithub()"}),"\n",(0,t.jsxs)(s.blockquote,{children:["\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.strong,{children:"authWithGithub"}),"(",(0,t.jsx)(s.code,{children:"deviceFlowTokenDto"}),"): ",(0,t.jsx)(s.code,{children:"Promise"}),"<",(0,t.jsx)(s.a,{href:"/api/Auth/Interfaces/AuthResponseDto",children:(0,t.jsx)(s.code,{children:"AuthResponseDto"})})," | ",(0,t.jsx)(s.code,{children:"Error"}),">"]}),"\n"]}),"\n",(0,t.jsxs)(s.p,{children:["Defined in: ",(0,t.jsx)(s.a,{href:"https://github.com/p0tion-tools/brebaje/blob/adec25cb37dc5c3412576402afa3a4ca679730fd/apps/backend/src/auth/auth.service.ts#L124",children:"apps/backend/src/auth/auth.service.ts:124"})]}),"\n",(0,t.jsx)(s.h4,{id:"parameters-2",children:"Parameters"}),"\n",(0,t.jsx)(s.h5,{id:"deviceflowtokendto",children:"deviceFlowTokenDto"}),"\n",(0,t.jsx)(s.p,{children:(0,t.jsx)(s.a,{href:"/api/Auth/Classes/DeviceFlowTokenDto",children:(0,t.jsx)(s.code,{children:"DeviceFlowTokenDto"})})}),"\n",(0,t.jsx)(s.h4,{id:"returns-2",children:"Returns"}),"\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.code,{children:"Promise"}),"<",(0,t.jsx)(s.a,{href:"/api/Auth/Interfaces/AuthResponseDto",children:(0,t.jsx)(s.code,{children:"AuthResponseDto"})})," | ",(0,t.jsx)(s.code,{children:"Error"}),">"]}),"\n",(0,t.jsx)(s.h3,{id:"generatecardanononce",children:"generateCardanoNonce()"}),"\n",(0,t.jsxs)(s.blockquote,{children:["\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.strong,{children:"generateCardanoNonce"}),"(",(0,t.jsx)(s.code,{children:"userAddress"}),"): ",(0,t.jsx)(s.code,{children:"object"})]}),"\n"]}),"\n",(0,t.jsxs)(s.p,{children:["Defined in: ",(0,t.jsx)(s.a,{href:"https://github.com/p0tion-tools/brebaje/blob/adec25cb37dc5c3412576402afa3a4ca679730fd/apps/backend/src/auth/auth.service.ts#L293",children:"apps/backend/src/auth/auth.service.ts:293"})]}),"\n",(0,t.jsx)(s.h4,{id:"parameters-3",children:"Parameters"}),"\n",(0,t.jsx)(s.h5,{id:"useraddress",children:"userAddress"}),"\n",(0,t.jsx)(s.p,{children:(0,t.jsx)(s.code,{children:"string"})}),"\n",(0,t.jsx)(s.h4,{id:"returns-3",children:"Returns"}),"\n",(0,t.jsx)(s.p,{children:(0,t.jsx)(s.code,{children:"object"})}),"\n",(0,t.jsx)(s.h5,{id:"nonce",children:"nonce"}),"\n",(0,t.jsxs)(s.blockquote,{children:["\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.strong,{children:"nonce"}),": ",(0,t.jsx)(s.code,{children:"string"})]}),"\n"]}),"\n",(0,t.jsx)(s.h3,{id:"generateethnonce",children:"generateEthNonce()"}),"\n",(0,t.jsxs)(s.blockquote,{children:["\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.strong,{children:"generateEthNonce"}),"(",(0,t.jsx)(s.code,{children:"address"}),"): ",(0,t.jsx)(s.code,{children:"object"})]}),"\n"]}),"\n",(0,t.jsxs)(s.p,{children:["Defined in: ",(0,t.jsx)(s.a,{href:"https://github.com/p0tion-tools/brebaje/blob/adec25cb37dc5c3412576402afa3a4ca679730fd/apps/backend/src/auth/auth.service.ts#L402",children:"apps/backend/src/auth/auth.service.ts:402"})]}),"\n",(0,t.jsx)(s.p,{children:"Generates a nonce for SIWE (Sign-In with Ethereum) authentication\nThe nonce is stored with a timestamp and expires after 5 minutes"}),"\n",(0,t.jsx)(s.h4,{id:"parameters-4",children:"Parameters"}),"\n",(0,t.jsx)(s.h5,{id:"address",children:"address"}),"\n",(0,t.jsx)(s.p,{children:(0,t.jsx)(s.code,{children:"string"})}),"\n",(0,t.jsx)(s.p,{children:"The Ethereum wallet address (0x prefixed)"}),"\n",(0,t.jsx)(s.h4,{id:"returns-4",children:"Returns"}),"\n",(0,t.jsx)(s.p,{children:(0,t.jsx)(s.code,{children:"object"})}),"\n",(0,t.jsx)(s.p,{children:"Object containing the generated nonce"}),"\n",(0,t.jsx)(s.h5,{id:"nonce-1",children:"nonce"}),"\n",(0,t.jsxs)(s.blockquote,{children:["\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.strong,{children:"nonce"}),": ",(0,t.jsx)(s.code,{children:"string"})]}),"\n"]}),"\n",(0,t.jsx)(s.h3,{id:"getgithubauthurl",children:"getGithubAuthUrl()"}),"\n",(0,t.jsxs)(s.blockquote,{children:["\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.strong,{children:"getGithubAuthUrl"}),"(): ",(0,t.jsx)(s.code,{children:"object"})]}),"\n"]}),"\n",(0,t.jsxs)(s.p,{children:["Defined in: ",(0,t.jsx)(s.a,{href:"https://github.com/p0tion-tools/brebaje/blob/adec25cb37dc5c3412576402afa3a4ca679730fd/apps/backend/src/auth/auth.service.ts#L182",children:"apps/backend/src/auth/auth.service.ts:182"})]}),"\n",(0,t.jsx)(s.p,{children:"GitHub OAuth 2.0 Authorization Code Flow\nStep 1: Generate authorization URL for frontend redirect"}),"\n",(0,t.jsx)(s.h4,{id:"returns-5",children:"Returns"}),"\n",(0,t.jsx)(s.p,{children:(0,t.jsx)(s.code,{children:"object"})}),"\n",(0,t.jsx)(s.h5,{id:"authurl",children:"authUrl"}),"\n",(0,t.jsxs)(s.blockquote,{children:["\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.strong,{children:"authUrl"}),": ",(0,t.jsx)(s.code,{children:"string"})]}),"\n"]}),"\n",(0,t.jsx)(s.h5,{id:"state-1",children:"state"}),"\n",(0,t.jsxs)(s.blockquote,{children:["\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.strong,{children:"state"}),": ",(0,t.jsx)(s.code,{children:"string"})]}),"\n"]}),"\n",(0,t.jsx)(s.h3,{id:"getgithubclientid",children:"getGithubClientId()"}),"\n",(0,t.jsxs)(s.blockquote,{children:["\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.strong,{children:"getGithubClientId"}),"(): ",(0,t.jsx)(s.code,{children:"object"})]}),"\n"]}),"\n",(0,t.jsxs)(s.p,{children:["Defined in: ",(0,t.jsx)(s.a,{href:"https://github.com/p0tion-tools/brebaje/blob/adec25cb37dc5c3412576402afa3a4ca679730fd/apps/backend/src/auth/auth.service.ts#L28",children:"apps/backend/src/auth/auth.service.ts:28"})]}),"\n",(0,t.jsx)(s.h4,{id:"returns-6",children:"Returns"}),"\n",(0,t.jsx)(s.p,{children:(0,t.jsx)(s.code,{children:"object"})}),"\n",(0,t.jsx)(s.h5,{id:"client_id",children:"client_id"}),"\n",(0,t.jsxs)(s.blockquote,{children:["\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.strong,{children:"client_id"}),": ",(0,t.jsx)(s.code,{children:"string"})," | ",(0,t.jsx)(s.code,{children:"undefined"})," = ",(0,t.jsx)(s.code,{children:"process.env.GITHUB_CLIENT_ID"})]}),"\n"]}),"\n",(0,t.jsx)(s.h3,{id:"testauthwithuserid",children:"testAuthWithUserId()"}),"\n",(0,t.jsxs)(s.blockquote,{children:["\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.strong,{children:"testAuthWithUserId"}),"(",(0,t.jsx)(s.code,{children:"userId"}),"): ",(0,t.jsx)(s.code,{children:"Promise"}),"<",(0,t.jsx)(s.a,{href:"/api/Auth/Interfaces/AuthResponseDto",children:(0,t.jsx)(s.code,{children:"AuthResponseDto"})}),">"]}),"\n"]}),"\n",(0,t.jsxs)(s.p,{children:["Defined in: ",(0,t.jsx)(s.a,{href:"https://github.com/p0tion-tools/brebaje/blob/adec25cb37dc5c3412576402afa3a4ca679730fd/apps/backend/src/auth/auth.service.ts#L157",children:"apps/backend/src/auth/auth.service.ts:157"})]}),"\n",(0,t.jsx)(s.p,{children:"Test-only authentication method\nGenerates JWT token for existing user without OAuth flow\nOnly available in test/development environments"}),"\n",(0,t.jsx)(s.h4,{id:"parameters-5",children:"Parameters"}),"\n",(0,t.jsx)(s.h5,{id:"userid",children:"userId"}),"\n",(0,t.jsx)(s.p,{children:(0,t.jsx)(s.code,{children:"number"})}),"\n",(0,t.jsx)(s.h4,{id:"returns-7",children:"Returns"}),"\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.code,{children:"Promise"}),"<",(0,t.jsx)(s.a,{href:"/api/Auth/Interfaces/AuthResponseDto",children:(0,t.jsx)(s.code,{children:"AuthResponseDto"})}),">"]}),"\n",(0,t.jsx)(s.h3,{id:"verifycardanononce",children:"verifyCardanoNonce()"}),"\n",(0,t.jsxs)(s.blockquote,{children:["\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.strong,{children:"verifyCardanoNonce"}),"(",(0,t.jsx)(s.code,{children:"userAddress"}),", ",(0,t.jsx)(s.code,{children:"signature"}),"): ",(0,t.jsx)(s.code,{children:"Promise"}),"<",(0,t.jsx)(s.a,{href:"/api/Auth/Interfaces/AuthResponseDto",children:(0,t.jsx)(s.code,{children:"AuthResponseDto"})})," | ",(0,t.jsx)(s.code,{children:"Error"}),">"]}),"\n"]}),"\n",(0,t.jsxs)(s.p,{children:["Defined in: ",(0,t.jsx)(s.a,{href:"https://github.com/p0tion-tools/brebaje/blob/adec25cb37dc5c3412576402afa3a4ca679730fd/apps/backend/src/auth/auth.service.ts#L322",children:"apps/backend/src/auth/auth.service.ts:322"})]}),"\n",(0,t.jsx)(s.h4,{id:"parameters-6",children:"Parameters"}),"\n",(0,t.jsx)(s.h5,{id:"useraddress-1",children:"userAddress"}),"\n",(0,t.jsx)(s.p,{children:(0,t.jsx)(s.code,{children:"string"})}),"\n",(0,t.jsx)(s.h5,{id:"signature",children:"signature"}),"\n",(0,t.jsx)(s.p,{children:(0,t.jsx)(s.code,{children:"DataSignature"})}),"\n",(0,t.jsx)(s.h4,{id:"returns-8",children:"Returns"}),"\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.code,{children:"Promise"}),"<",(0,t.jsx)(s.a,{href:"/api/Auth/Interfaces/AuthResponseDto",children:(0,t.jsx)(s.code,{children:"AuthResponseDto"})})," | ",(0,t.jsx)(s.code,{children:"Error"}),">"]}),"\n",(0,t.jsx)(s.h3,{id:"verifyethsignature",children:"verifyEthSignature()"}),"\n",(0,t.jsxs)(s.blockquote,{children:["\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.strong,{children:"verifyEthSignature"}),"(",(0,t.jsx)(s.code,{children:"message"}),", ",(0,t.jsx)(s.code,{children:"signature"}),"): ",(0,t.jsx)(s.code,{children:"Promise"}),"<",(0,t.jsx)(s.a,{href:"/api/Auth/Interfaces/AuthResponseDto",children:(0,t.jsx)(s.code,{children:"AuthResponseDto"})}),">"]}),"\n"]}),"\n",(0,t.jsxs)(s.p,{children:["Defined in: ",(0,t.jsx)(s.a,{href:"https://github.com/p0tion-tools/brebaje/blob/adec25cb37dc5c3412576402afa3a4ca679730fd/apps/backend/src/auth/auth.service.ts#L447",children:"apps/backend/src/auth/auth.service.ts:447"})]}),"\n",(0,t.jsx)(s.p,{children:"Verifies a SIWE (Sign-In with Ethereum) signature and authenticates the user\nFollowing EIP-4361 standard"}),"\n",(0,t.jsx)(s.h4,{id:"parameters-7",children:"Parameters"}),"\n",(0,t.jsx)(s.h5,{id:"message",children:"message"}),"\n",(0,t.jsx)(s.p,{children:(0,t.jsx)(s.code,{children:"string"})}),"\n",(0,t.jsx)(s.p,{children:"The SIWE message that was signed"}),"\n",(0,t.jsx)(s.h5,{id:"signature-1",children:"signature"}),"\n",(0,t.jsx)(s.p,{children:(0,t.jsx)(s.code,{children:"string"})}),"\n",(0,t.jsx)(s.p,{children:"The cryptographic signature from the wallet"}),"\n",(0,t.jsx)(s.h4,{id:"returns-9",children:"Returns"}),"\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.code,{children:"Promise"}),"<",(0,t.jsx)(s.a,{href:"/api/Auth/Interfaces/AuthResponseDto",children:(0,t.jsx)(s.code,{children:"AuthResponseDto"})}),">"]}),"\n",(0,t.jsx)(s.p,{children:"AuthResponseDto with user and JWT token"})]})}function o(e={}){const{wrapper:s}={...(0,i.R)(),...e.components};return s?(0,t.jsx)(s,{...e,children:(0,t.jsx)(l,{...e})}):l(e)}}}]);