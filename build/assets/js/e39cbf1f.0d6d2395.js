"use strict";(self.webpackChunkroot=self.webpackChunkroot||[]).push([[95978],{42619:(e,n,s)=>{s.d(n,{R:()=>d,x:()=>t});var i=s(30758);const r={},c=i.createContext(r);function d(e){const n=i.useContext(c);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function t(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:d(e.components),i.createElement(c.Provider,{value:n},e.children)}},78065:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>a,contentTitle:()=>t,default:()=>o,frontMatter:()=>d,metadata:()=>i,toc:()=>l});const i=JSON.parse('{"id":"api/apps/backend/src/vm/vm.service/classes/VmService","title":"VmService","description":"Brebaje Documentation","source":"@site/docs/api/apps/backend/src/vm/vm.service/classes/VmService.md","sourceDirName":"api/apps/backend/src/vm/vm.service/classes","slug":"/api/apps/backend/src/vm/vm.service/classes/VmService","permalink":"/api/apps/backend/src/vm/vm.service/classes/VmService","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{},"sidebar":"docsSidebar","previous":{"title":"index","permalink":"/api/apps/backend/src/vm/vm.service/"},"next":{"title":"index","permalink":"/api/apps/cli/src/"}}');var r=s(86070),c=s(42619);const d={},t=void 0,a={},l=[{value:"Constructors",id:"constructors",level:2},{value:"Constructor",id:"constructor",level:3},{value:"Returns",id:"returns",level:4},{value:"Methods",id:"methods",level:2},{value:"checkIfRunning()",id:"checkifrunning",level:3},{value:"Parameters",id:"parameters",level:4},{value:"instanceId",id:"instanceid",level:5},{value:"Returns",id:"returns-1",level:4},{value:"computeDiskSizeForVM()",id:"computedisksizeforvm",level:3},{value:"Parameters",id:"parameters-1",level:4},{value:"zKeySizeInBytes",id:"zkeysizeinbytes",level:5},{value:"pot",id:"pot",level:5},{value:"Returns",id:"returns-2",level:4},{value:"Remarks",id:"remarks",level:4},{value:"createEC2Instance()",id:"createec2instance",level:3},{value:"Parameters",id:"parameters-2",level:4},{value:"commands",id:"commands",level:5},{value:"instanceType",id:"instancetype",level:5},{value:"volumeSize",id:"volumesize",level:5},{value:"diskType",id:"disktype",level:5},{value:"Returns",id:"returns-3",level:4},{value:"evaluateVerificationResult()",id:"evaluateverificationresult",level:3},{value:"Parameters",id:"parameters-3",level:4},{value:"commandOutput",id:"commandoutput",level:5},{value:"commandStatus",id:"commandstatus",level:5},{value:"Returns",id:"returns-4",level:4},{value:"Remarks",id:"remarks-1",level:4},{value:"getEC2Client()",id:"getec2client",level:3},{value:"Returns",id:"returns-5",level:4},{value:"getSSMClient()",id:"getssmclient",level:3},{value:"Returns",id:"returns-6",level:4},{value:"retrieveCommandOutput()",id:"retrievecommandoutput",level:3},{value:"Parameters",id:"parameters-4",level:4},{value:"instanceId",id:"instanceid-1",level:5},{value:"commandId",id:"commandid",level:5},{value:"Returns",id:"returns-7",level:4},{value:"retrieveCommandStatus()",id:"retrievecommandstatus",level:3},{value:"Parameters",id:"parameters-5",level:4},{value:"instanceId",id:"instanceid-2",level:5},{value:"commandId",id:"commandid-1",level:5},{value:"Returns",id:"returns-8",level:4},{value:"runCommandUsingSSM()",id:"runcommandusingssm",level:3},{value:"Parameters",id:"parameters-6",level:4},{value:"instanceId",id:"instanceid-3",level:5},{value:"commands",id:"commands-1",level:5},{value:"Returns",id:"returns-9",level:4},{value:"Remarks",id:"remarks-2",level:4},{value:"startEC2Instance()",id:"startec2instance",level:3},{value:"Parameters",id:"parameters-7",level:4},{value:"instanceId",id:"instanceid-4",level:5},{value:"Returns",id:"returns-10",level:4},{value:"Remarks",id:"remarks-3",level:4},{value:"stopEC2Instance()",id:"stopec2instance",level:3},{value:"Parameters",id:"parameters-8",level:4},{value:"instanceId",id:"instanceid-5",level:5},{value:"Returns",id:"returns-11",level:4},{value:"Remarks",id:"remarks-4",level:4},{value:"terminateEC2Instance()",id:"terminateec2instance",level:3},{value:"Parameters",id:"parameters-9",level:4},{value:"instanceId",id:"instanceid-6",level:5},{value:"Returns",id:"returns-12",level:4},{value:"vmBootstrapCommands()",id:"vmbootstrapcommands",level:3},{value:"Parameters",id:"parameters-10",level:4},{value:"bucketName",id:"bucketname",level:5},{value:"Returns",id:"returns-13",level:4},{value:"Remarks",id:"remarks-5",level:4},{value:"vmDependenciesAndCacheArtifactsCommand()",id:"vmdependenciesandcacheartifactscommand",level:3},{value:"Parameters",id:"parameters-11",level:4},{value:"zKeyPath",id:"zkeypath",level:5},{value:"potPath",id:"potpath",level:5},{value:"Returns",id:"returns-14",level:4},{value:"vmVerificationPhase1Command()",id:"vmverificationphase1command",level:3},{value:"Parameters",id:"parameters-12",level:4},{value:"bucketName",id:"bucketname-1",level:5},{value:"lastPtauStoragePath",id:"lastptaustoragepath",level:5},{value:"Returns",id:"returns-15",level:4},{value:"vmVerificationPhase2Command()",id:"vmverificationphase2command",level:3},{value:"Parameters",id:"parameters-13",level:4},{value:"bucketName",id:"bucketname-2",level:5},{value:"lastZkeyStoragePath",id:"lastzkeystoragepath",level:5},{value:"verificationTranscriptStoragePathAndFilename",id:"verificationtranscriptstoragepathandfilename",level:5},{value:"Returns",id:"returns-16",level:4},{value:"Remarks",id:"remarks-6",level:4}];function h(e){const n={a:"a",blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",hr:"hr",p:"p",strong:"strong",...(0,c.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.p,{children:(0,r.jsx)(n.a,{href:"/api/",children:(0,r.jsx)(n.strong,{children:"Brebaje Documentation"})})}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.a,{href:"/api/",children:"Brebaje Documentation"})," / ",(0,r.jsx)(n.a,{href:"/api/apps/backend/src/vm/vm.service/",children:"apps/backend/src/vm/vm.service"})," / VmService"]}),"\n",(0,r.jsx)(n.h1,{id:"class-vmservice",children:"Class: VmService"}),"\n",(0,r.jsxs)(n.p,{children:["Defined in: ",(0,r.jsx)(n.a,{href:"https://github.com/p0tion-tools/brebaje/blob/d46df74e1ac0040aa4be8ad632f25004641f167b/apps/backend/src/vm/vm.service.ts#L32",children:"apps/backend/src/vm/vm.service.ts:32"})]}),"\n",(0,r.jsx)(n.h2,{id:"constructors",children:"Constructors"}),"\n",(0,r.jsx)(n.h3,{id:"constructor",children:"Constructor"}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"new VmService"}),"(): ",(0,r.jsx)(n.code,{children:"VmService"})]}),"\n"]}),"\n",(0,r.jsx)(n.h4,{id:"returns",children:"Returns"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.code,{children:"VmService"})}),"\n",(0,r.jsx)(n.h2,{id:"methods",children:"Methods"}),"\n",(0,r.jsx)(n.h3,{id:"checkifrunning",children:"checkIfRunning()"}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"checkIfRunning"}),"(",(0,r.jsx)(n.code,{children:"instanceId"}),"): ",(0,r.jsx)(n.code,{children:"Promise"}),"<",(0,r.jsx)(n.code,{children:"boolean"}),">"]}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:["Defined in: ",(0,r.jsx)(n.a,{href:"https://github.com/p0tion-tools/brebaje/blob/d46df74e1ac0040aa4be8ad632f25004641f167b/apps/backend/src/vm/vm.service.ts#L241",children:"apps/backend/src/vm/vm.service.ts:241"})]}),"\n",(0,r.jsx)(n.p,{children:"Check if the current VM EC2 instance is running by querying the status."}),"\n",(0,r.jsx)(n.h4,{id:"parameters",children:"Parameters"}),"\n",(0,r.jsx)(n.h5,{id:"instanceid",children:"instanceId"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.code,{children:"string"})}),"\n",(0,r.jsx)(n.p,{children:"The unique identifier of the EC2 VM instance."}),"\n",(0,r.jsx)(n.h4,{id:"returns-1",children:"Returns"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"Promise"}),"<",(0,r.jsx)(n.code,{children:"boolean"}),">"]}),"\n",(0,r.jsx)(n.p,{children:"True if the current status of the EC2 VM instance is 'running'; otherwise false."}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h3,{id:"computedisksizeforvm",children:"computeDiskSizeForVM()"}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"computeDiskSizeForVM"}),"(",(0,r.jsx)(n.code,{children:"zKeySizeInBytes"}),", ",(0,r.jsx)(n.code,{children:"pot"}),"): ",(0,r.jsx)(n.code,{children:"number"})]}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:["Defined in: ",(0,r.jsx)(n.a,{href:"https://github.com/p0tion-tools/brebaje/blob/d46df74e1ac0040aa4be8ad632f25004641f167b/apps/backend/src/vm/vm.service.ts#L90",children:"apps/backend/src/vm/vm.service.ts:90"})]}),"\n",(0,r.jsx)(n.p,{children:"Compute the VM disk size."}),"\n",(0,r.jsx)(n.h4,{id:"parameters-1",children:"Parameters"}),"\n",(0,r.jsx)(n.h5,{id:"zkeysizeinbytes",children:"zKeySizeInBytes"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.code,{children:"number"})}),"\n",(0,r.jsx)(n.p,{children:"The size of the zKey in bytes."}),"\n",(0,r.jsx)(n.h5,{id:"pot",children:"pot"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.code,{children:"number"})}),"\n",(0,r.jsx)(n.p,{children:"The amount of powers needed for the circuit (index of the PPoT file)."}),"\n",(0,r.jsx)(n.h4,{id:"returns-2",children:"Returns"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.code,{children:"number"})}),"\n",(0,r.jsx)(n.p,{children:"The configuration of the VM disk size in GB."}),"\n",(0,r.jsx)(n.h4,{id:"remarks",children:"Remarks"}),"\n",(0,r.jsx)(n.p,{children:"The disk size is computed using the zKey size in bytes taking into consideration\nthe verification task (2 * zKeySize) + ptauSize + OS/VM (~8GB)."}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h3,{id:"createec2instance",children:"createEC2Instance()"}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"createEC2Instance"}),"(",(0,r.jsx)(n.code,{children:"commands"}),", ",(0,r.jsx)(n.code,{children:"instanceType"}),", ",(0,r.jsx)(n.code,{children:"volumeSize"}),", ",(0,r.jsx)(n.code,{children:"diskType"}),"): ",(0,r.jsx)(n.code,{children:"Promise"}),"<",(0,r.jsx)(n.a,{href:"/api/apps/backend/src/types/type-aliases/EC2Instance",children:(0,r.jsx)(n.code,{children:"EC2Instance"})}),">"]}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:["Defined in: ",(0,r.jsx)(n.a,{href:"https://github.com/p0tion-tools/brebaje/blob/d46df74e1ac0040aa4be8ad632f25004641f167b/apps/backend/src/vm/vm.service.ts#L147",children:"apps/backend/src/vm/vm.service.ts:147"})]}),"\n",(0,r.jsx)(n.p,{children:"Creates a new EC2 instance"}),"\n",(0,r.jsx)(n.h4,{id:"parameters-2",children:"Parameters"}),"\n",(0,r.jsx)(n.h5,{id:"commands",children:"commands"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"string"}),"[]"]}),"\n",(0,r.jsx)(n.p,{children:"The list of commands to be run on the EC2 instance."}),"\n",(0,r.jsx)(n.h5,{id:"instancetype",children:"instanceType"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.code,{children:"string"})}),"\n",(0,r.jsx)(n.p,{children:"The type of the EC2 VM instance."}),"\n",(0,r.jsx)(n.h5,{id:"volumesize",children:"volumeSize"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.code,{children:"number"})}),"\n",(0,r.jsx)(n.p,{children:"The size of the disk (volume) of the VM."}),"\n",(0,r.jsx)(n.h5,{id:"disktype",children:"diskType"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.code,{children:"VolumeType"})}),"\n",(0,r.jsx)(n.p,{children:"The type of the disk (volume) of the VM."}),"\n",(0,r.jsx)(n.h4,{id:"returns-3",children:"Returns"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"Promise"}),"<",(0,r.jsx)(n.a,{href:"/api/apps/backend/src/types/type-aliases/EC2Instance",children:(0,r.jsx)(n.code,{children:"EC2Instance"})}),">"]}),"\n",(0,r.jsx)(n.p,{children:"The instance that was created"}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h3,{id:"evaluateverificationresult",children:"evaluateVerificationResult()"}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"evaluateVerificationResult"}),"(",(0,r.jsx)(n.code,{children:"commandOutput"}),", ",(0,r.jsx)(n.code,{children:"commandStatus"}),"): ",(0,r.jsx)(n.code,{children:"number"})]}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:["Defined in: ",(0,r.jsx)(n.a,{href:"https://github.com/p0tion-tools/brebaje/blob/d46df74e1ac0040aa4be8ad632f25004641f167b/apps/backend/src/vm/vm.service.ts#L482",children:"apps/backend/src/vm/vm.service.ts:482"})]}),"\n",(0,r.jsx)(n.p,{children:"Evaluate verification command results and return HTTP status code."}),"\n",(0,r.jsx)(n.h4,{id:"parameters-3",children:"Parameters"}),"\n",(0,r.jsx)(n.h5,{id:"commandoutput",children:"commandOutput"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.code,{children:"string"})}),"\n",(0,r.jsx)(n.p,{children:"The stdout from the verification command."}),"\n",(0,r.jsx)(n.h5,{id:"commandstatus",children:"commandStatus"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.code,{children:"string"})}),"\n",(0,r.jsx)(n.p,{children:"The execution status from SSM."}),"\n",(0,r.jsx)(n.h4,{id:"returns-4",children:"Returns"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.code,{children:"number"})}),"\n",(0,r.jsx)(n.p,{children:"HTTP status code (200 for success, 400 for verification failure)."}),"\n",(0,r.jsx)(n.h4,{id:"remarks-1",children:"Remarks"}),"\n",(0,r.jsx)(n.p,{children:"This method interprets SSM command execution results for verification operations."}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h3,{id:"getec2client",children:"getEC2Client()"}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"getEC2Client"}),"(): ",(0,r.jsx)(n.code,{children:"EC2Client"})]}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:["Defined in: ",(0,r.jsx)(n.a,{href:"https://github.com/p0tion-tools/brebaje/blob/d46df74e1ac0040aa4be8ad632f25004641f167b/apps/backend/src/vm/vm.service.ts#L115",children:"apps/backend/src/vm/vm.service.ts:115"})]}),"\n",(0,r.jsx)(n.p,{children:"Get the EC2 client to create new AWS instances"}),"\n",(0,r.jsx)(n.h4,{id:"returns-5",children:"Returns"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.code,{children:"EC2Client"})}),"\n",(0,r.jsx)(n.p,{children:"The instance of the EC2 client."}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h3,{id:"getssmclient",children:"getSSMClient()"}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"getSSMClient"}),"(): ",(0,r.jsx)(n.code,{children:"SSMClient"})]}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:["Defined in: ",(0,r.jsx)(n.a,{href:"https://github.com/p0tion-tools/brebaje/blob/d46df74e1ac0040aa4be8ad632f25004641f167b/apps/backend/src/vm/vm.service.ts#L129",children:"apps/backend/src/vm/vm.service.ts:129"})]}),"\n",(0,r.jsx)(n.p,{children:"Get the SSM client to interact with AWS Systems Manager (interact with EC2 instances)."}),"\n",(0,r.jsx)(n.h4,{id:"returns-6",children:"Returns"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.code,{children:"SSMClient"})}),"\n",(0,r.jsx)(n.p,{children:"The instance of the SSM client."}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h3,{id:"retrievecommandoutput",children:"retrieveCommandOutput()"}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"retrieveCommandOutput"}),"(",(0,r.jsx)(n.code,{children:"instanceId"}),", ",(0,r.jsx)(n.code,{children:"commandId"}),"): ",(0,r.jsx)(n.code,{children:"Promise"}),"<",(0,r.jsx)(n.code,{children:"string"}),">"]}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:["Defined in: ",(0,r.jsx)(n.a,{href:"https://github.com/p0tion-tools/brebaje/blob/d46df74e1ac0040aa4be8ad632f25004641f167b/apps/backend/src/vm/vm.service.ts#L375",children:"apps/backend/src/vm/vm.service.ts:375"})]}),"\n",(0,r.jsx)(n.p,{children:"Get the output of an SSM command executed on an EC2 VM instance."}),"\n",(0,r.jsx)(n.h4,{id:"parameters-4",children:"Parameters"}),"\n",(0,r.jsx)(n.h5,{id:"instanceid-1",children:"instanceId"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.code,{children:"string"})}),"\n",(0,r.jsx)(n.p,{children:"The unique identifier of the EC2 VM instance."}),"\n",(0,r.jsx)(n.h5,{id:"commandid",children:"commandId"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.code,{children:"string"})}),"\n",(0,r.jsx)(n.p,{children:"The unique identifier of the command."}),"\n",(0,r.jsx)(n.h4,{id:"returns-7",children:"Returns"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"Promise"}),"<",(0,r.jsx)(n.code,{children:"string"}),">"]}),"\n",(0,r.jsx)(n.p,{children:"The command output."}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h3,{id:"retrievecommandstatus",children:"retrieveCommandStatus()"}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"retrieveCommandStatus"}),"(",(0,r.jsx)(n.code,{children:"instanceId"}),", ",(0,r.jsx)(n.code,{children:"commandId"}),"): ",(0,r.jsx)(n.code,{children:"Promise"}),"<",(0,r.jsx)(n.code,{children:"string"}),">"]}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:["Defined in: ",(0,r.jsx)(n.a,{href:"https://github.com/p0tion-tools/brebaje/blob/d46df74e1ac0040aa4be8ad632f25004641f167b/apps/backend/src/vm/vm.service.ts#L403",children:"apps/backend/src/vm/vm.service.ts:403"})]}),"\n",(0,r.jsx)(n.p,{children:"Get the status of an SSM command executed on an EC2 VM instance."}),"\n",(0,r.jsx)(n.h4,{id:"parameters-5",children:"Parameters"}),"\n",(0,r.jsx)(n.h5,{id:"instanceid-2",children:"instanceId"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.code,{children:"string"})}),"\n",(0,r.jsx)(n.p,{children:"The unique identifier of the EC2 VM instance."}),"\n",(0,r.jsx)(n.h5,{id:"commandid-1",children:"commandId"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.code,{children:"string"})}),"\n",(0,r.jsx)(n.p,{children:"The unique identifier of the command."}),"\n",(0,r.jsx)(n.h4,{id:"returns-8",children:"Returns"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"Promise"}),"<",(0,r.jsx)(n.code,{children:"string"}),">"]}),"\n",(0,r.jsx)(n.p,{children:"The command status."}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h3,{id:"runcommandusingssm",children:"runCommandUsingSSM()"}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"runCommandUsingSSM"}),"(",(0,r.jsx)(n.code,{children:"instanceId"}),", ",(0,r.jsx)(n.code,{children:"commands"}),"): ",(0,r.jsx)(n.code,{children:"Promise"}),"<",(0,r.jsx)(n.code,{children:"string"}),">"]}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:["Defined in: ",(0,r.jsx)(n.a,{href:"https://github.com/p0tion-tools/brebaje/blob/d46df74e1ac0040aa4be8ad632f25004641f167b/apps/backend/src/vm/vm.service.ts#L344",children:"apps/backend/src/vm/vm.service.ts:344"})]}),"\n",(0,r.jsx)(n.p,{children:"Run a command on an EC2 VM instance by using SSM."}),"\n",(0,r.jsx)(n.h4,{id:"parameters-6",children:"Parameters"}),"\n",(0,r.jsx)(n.h5,{id:"instanceid-3",children:"instanceId"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.code,{children:"string"})}),"\n",(0,r.jsx)(n.p,{children:"The unique identifier of the EC2 VM instance."}),"\n",(0,r.jsx)(n.h5,{id:"commands-1",children:"commands"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"string"}),"[]"]}),"\n",(0,r.jsx)(n.p,{children:"The list of commands."}),"\n",(0,r.jsx)(n.h4,{id:"returns-9",children:"Returns"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"Promise"}),"<",(0,r.jsx)(n.code,{children:"string"}),">"]}),"\n",(0,r.jsx)(n.p,{children:"The unique identifier of the command."}),"\n",(0,r.jsx)(n.h4,{id:"remarks-2",children:"Remarks"}),"\n",(0,r.jsx)(n.p,{children:"This method returns the command identifier for checking the status and retrieve\nthe output of the command execution later on."}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h3,{id:"startec2instance",children:"startEC2Instance()"}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"startEC2Instance"}),"(",(0,r.jsx)(n.code,{children:"instanceId"}),"): ",(0,r.jsx)(n.code,{children:"Promise"}),"<",(0,r.jsx)(n.code,{children:"void"}),">"]}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:["Defined in: ",(0,r.jsx)(n.a,{href:"https://github.com/p0tion-tools/brebaje/blob/d46df74e1ac0040aa4be8ad632f25004641f167b/apps/backend/src/vm/vm.service.ts#L273",children:"apps/backend/src/vm/vm.service.ts:273"})]}),"\n",(0,r.jsx)(n.p,{children:"Start an EC2 VM instance."}),"\n",(0,r.jsx)(n.h4,{id:"parameters-7",children:"Parameters"}),"\n",(0,r.jsx)(n.h5,{id:"instanceid-4",children:"instanceId"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.code,{children:"string"})}),"\n",(0,r.jsx)(n.p,{children:"The unique identifier of the EC2 VM instance."}),"\n",(0,r.jsx)(n.h4,{id:"returns-10",children:"Returns"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"Promise"}),"<",(0,r.jsx)(n.code,{children:"void"}),">"]}),"\n",(0,r.jsx)(n.h4,{id:"remarks-3",children:"Remarks"}),"\n",(0,r.jsx)(n.p,{children:"The instance must have been created previously."}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h3,{id:"stopec2instance",children:"stopEC2Instance()"}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"stopEC2Instance"}),"(",(0,r.jsx)(n.code,{children:"instanceId"}),"): ",(0,r.jsx)(n.code,{children:"Promise"}),"<",(0,r.jsx)(n.code,{children:"void"}),">"]}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:["Defined in: ",(0,r.jsx)(n.a,{href:"https://github.com/p0tion-tools/brebaje/blob/d46df74e1ac0040aa4be8ad632f25004641f167b/apps/backend/src/vm/vm.service.ts#L296",children:"apps/backend/src/vm/vm.service.ts:296"})]}),"\n",(0,r.jsx)(n.p,{children:"Stop an EC2 VM instance."}),"\n",(0,r.jsx)(n.h4,{id:"parameters-8",children:"Parameters"}),"\n",(0,r.jsx)(n.h5,{id:"instanceid-5",children:"instanceId"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.code,{children:"string"})}),"\n",(0,r.jsx)(n.p,{children:"The unique identifier of the EC2 VM instance."}),"\n",(0,r.jsx)(n.h4,{id:"returns-11",children:"Returns"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"Promise"}),"<",(0,r.jsx)(n.code,{children:"void"}),">"]}),"\n",(0,r.jsx)(n.h4,{id:"remarks-4",children:"Remarks"}),"\n",(0,r.jsx)(n.p,{children:"The instance must have been in a running status."}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h3,{id:"terminateec2instance",children:"terminateEC2Instance()"}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"terminateEC2Instance"}),"(",(0,r.jsx)(n.code,{children:"instanceId"}),"): ",(0,r.jsx)(n.code,{children:"Promise"}),"<",(0,r.jsx)(n.code,{children:"void"}),">"]}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:["Defined in: ",(0,r.jsx)(n.a,{href:"https://github.com/p0tion-tools/brebaje/blob/d46df74e1ac0040aa4be8ad632f25004641f167b/apps/backend/src/vm/vm.service.ts#L318",children:"apps/backend/src/vm/vm.service.ts:318"})]}),"\n",(0,r.jsx)(n.p,{children:"Terminate an EC2 VM instance."}),"\n",(0,r.jsx)(n.h4,{id:"parameters-9",children:"Parameters"}),"\n",(0,r.jsx)(n.h5,{id:"instanceid-6",children:"instanceId"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.code,{children:"string"})}),"\n",(0,r.jsx)(n.p,{children:"The unique identifier of the EC2 VM instance."}),"\n",(0,r.jsx)(n.h4,{id:"returns-12",children:"Returns"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"Promise"}),"<",(0,r.jsx)(n.code,{children:"void"}),">"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h3,{id:"vmbootstrapcommands",children:"vmBootstrapCommands()"}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"vmBootstrapCommands"}),"(",(0,r.jsx)(n.code,{children:"bucketName"}),"): ",(0,r.jsx)(n.code,{children:"string"}),"[]"]}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:["Defined in: ",(0,r.jsx)(n.a,{href:"https://github.com/p0tion-tools/brebaje/blob/d46df74e1ac0040aa4be8ad632f25004641f167b/apps/backend/src/vm/vm.service.ts#L39",children:"apps/backend/src/vm/vm.service.ts:39"})]}),"\n",(0,r.jsx)(n.p,{children:"Return the list of bootstrap commands to be executed."}),"\n",(0,r.jsx)(n.h4,{id:"parameters-10",children:"Parameters"}),"\n",(0,r.jsx)(n.h5,{id:"bucketname",children:"bucketName"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.code,{children:"string"})}),"\n",(0,r.jsx)(n.p,{children:"The name of the AWS S3 bucket."}),"\n",(0,r.jsx)(n.h4,{id:"returns-13",children:"Returns"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"string"}),"[]"]}),"\n",(0,r.jsx)(n.p,{children:"The list of startup commands to be executed."}),"\n",(0,r.jsx)(n.h4,{id:"remarks-5",children:"Remarks"}),"\n",(0,r.jsx)(n.p,{children:"The startup commands must be suitable for a shell script."}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h3,{id:"vmdependenciesandcacheartifactscommand",children:"vmDependenciesAndCacheArtifactsCommand()"}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"vmDependenciesAndCacheArtifactsCommand"}),"(",(0,r.jsx)(n.code,{children:"zKeyPath"}),", ",(0,r.jsx)(n.code,{children:"potPath"}),"): ",(0,r.jsx)(n.code,{children:"string"}),"[]"]}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:["Defined in: ",(0,r.jsx)(n.a,{href:"https://github.com/p0tion-tools/brebaje/blob/d46df74e1ac0040aa4be8ad632f25004641f167b/apps/backend/src/vm/vm.service.ts#L53",children:"apps/backend/src/vm/vm.service.ts:53"})]}),"\n",(0,r.jsx)(n.p,{children:"Return the list of Node environment (and packages) installation plus artifact caching for contribution verification."}),"\n",(0,r.jsx)(n.h4,{id:"parameters-11",children:"Parameters"}),"\n",(0,r.jsx)(n.h5,{id:"zkeypath",children:"zKeyPath"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.code,{children:"string"})}),"\n",(0,r.jsx)(n.p,{children:"The path to zKey artifact inside AWS S3 bucket."}),"\n",(0,r.jsx)(n.h5,{id:"potpath",children:"potPath"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.code,{children:"string"})}),"\n",(0,r.jsx)(n.p,{children:"The path to ptau artifact inside AWS S3 bucket."}),"\n",(0,r.jsx)(n.h4,{id:"returns-14",children:"Returns"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"string"}),"[]"]}),"\n",(0,r.jsx)(n.p,{children:"The array of commands to be run by the EC2 instance."}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h3,{id:"vmverificationphase1command",children:"vmVerificationPhase1Command()"}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"vmVerificationPhase1Command"}),"(",(0,r.jsx)(n.code,{children:"bucketName"}),", ",(0,r.jsx)(n.code,{children:"lastPtauStoragePath"}),"): ",(0,r.jsx)(n.code,{children:"string"}),"[]"]}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:["Defined in: ",(0,r.jsx)(n.a,{href:"https://github.com/p0tion-tools/brebaje/blob/d46df74e1ac0040aa4be8ad632f25004641f167b/apps/backend/src/vm/vm.service.ts#L430",children:"apps/backend/src/vm/vm.service.ts:430"})]}),"\n",(0,r.jsx)(n.p,{children:"Return the list of commands for verification of a phase 1 contribution (Powers of Tau)."}),"\n",(0,r.jsx)(n.h4,{id:"parameters-12",children:"Parameters"}),"\n",(0,r.jsx)(n.h5,{id:"bucketname-1",children:"bucketName"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.code,{children:"string"})}),"\n",(0,r.jsx)(n.p,{children:"The name of the AWS S3 bucket."}),"\n",(0,r.jsx)(n.h5,{id:"lastptaustoragepath",children:"lastPtauStoragePath"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.code,{children:"string"})}),"\n",(0,r.jsx)(n.p,{children:"The last ptau storage path."}),"\n",(0,r.jsx)(n.h4,{id:"returns-15",children:"Returns"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"string"}),"[]"]}),"\n",(0,r.jsx)(n.p,{children:"The list of commands for contribution verification."}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h3,{id:"vmverificationphase2command",children:"vmVerificationPhase2Command()"}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"vmVerificationPhase2Command"}),"(",(0,r.jsx)(n.code,{children:"bucketName"}),", ",(0,r.jsx)(n.code,{children:"lastZkeyStoragePath"}),", ",(0,r.jsx)(n.code,{children:"verificationTranscriptStoragePathAndFilename"}),"): ",(0,r.jsx)(n.code,{children:"string"}),"[]"]}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:["Defined in: ",(0,r.jsx)(n.a,{href:"https://github.com/p0tion-tools/brebaje/blob/d46df74e1ac0040aa4be8ad632f25004641f167b/apps/backend/src/vm/vm.service.ts#L460",children:"apps/backend/src/vm/vm.service.ts:460"})]}),"\n",(0,r.jsx)(n.p,{children:"Return the list of commands for verification of a phase 2 contribution."}),"\n",(0,r.jsx)(n.h4,{id:"parameters-13",children:"Parameters"}),"\n",(0,r.jsx)(n.h5,{id:"bucketname-2",children:"bucketName"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.code,{children:"string"})}),"\n",(0,r.jsx)(n.p,{children:"The name of the AWS S3 bucket."}),"\n",(0,r.jsx)(n.h5,{id:"lastzkeystoragepath",children:"lastZkeyStoragePath"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.code,{children:"string"})}),"\n",(0,r.jsx)(n.p,{children:"The last zKey storage path."}),"\n",(0,r.jsx)(n.h5,{id:"verificationtranscriptstoragepathandfilename",children:"verificationTranscriptStoragePathAndFilename"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.code,{children:"string"})}),"\n",(0,r.jsx)(n.p,{children:"The verification transcript storage path."}),"\n",(0,r.jsx)(n.h4,{id:"returns-16",children:"Returns"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"string"}),"[]"]}),"\n",(0,r.jsx)(n.p,{children:"The list of commands for contribution verification."}),"\n",(0,r.jsx)(n.h4,{id:"remarks-6",children:"Remarks"}),"\n",(0,r.jsx)(n.p,{children:"This method generates the verification transcript as well."})]})}function o(e={}){const{wrapper:n}={...(0,c.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(h,{...e})}):h(e)}}}]);